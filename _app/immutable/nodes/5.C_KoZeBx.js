import{s as F,n as q,a as T}from"../chunks/scheduler.BfJEPAwo.js";import{S as R,i as V,e as g,s as S,c as $,a as k,d as _,f as I,k as h,g as E,h as p,l as z,t as b,b as j,j as P,m as A,n as G,o as M,p as O,q as J,r as K}from"../chunks/index.Bmk0YtMX.js";import{d as U,r as Q}from"../chunks/Comic.svelte_svelte_type_style_lang.CSYvPXNW.js";function W(a){let e;return{c(){e=b("Show comics")},l(t){e=j(t,"Show comics")},m(t,r){E(t,e,r)},d(t){t&&_(e)}}}function X(a){let e;return{c(){e=b("Hide comic")},l(t){e=j(t,"Hide comic")},m(t,r){E(t,e,r)},d(t){t&&_(e)}}}function Y(a){let e,t;return{c(){e=g("p"),t=b(a[1]),this.h()},l(r){e=$(r,"P",{class:!0});var n=k(e);t=j(n,a[1]),n.forEach(_),this.h()},h(){h(e,"class","error svelte-wejjat")},m(r,n){E(r,e,n),p(e,t)},p(r,n){n&2&&P(t,r[1])},d(r){r&&_(e)}}}function Z(a){let e,t,r=a[0].title+"",n,y,c,u,l,w,s,i=B(`${a[0].year}-${a[0].month}-${a[0].day}`)+"",o,d,v,D=a[3](`${a[0].year}-${a[0].month}-${a[0].day}`)+"",C;return{c(){e=g("div"),t=g("h5"),n=b(r),y=S(),c=g("img"),w=S(),s=g("p"),o=b(i),d=S(),v=g("p"),C=b(D),this.h()},l(f){e=$(f,"DIV",{class:!0});var m=k(e);t=$(m,"H5",{id:!0});var H=k(t);n=j(H,r),H.forEach(_),y=I(m),c=$(m,"IMG",{id:!0,src:!0,alt:!0,class:!0}),w=I(m),s=$(m,"P",{id:!0});var L=k(s);o=j(L,i),L.forEach(_),d=I(m),v=$(m,"P",{id:!0});var N=k(v);C=j(N,D),N.forEach(_),m.forEach(_),this.h()},h(){h(t,"id","comic-title"),h(c,"id","comic-img"),T(c.src,u=a[0].img)||h(c,"src",u),h(c,"alt",l=a[0].alt),h(c,"class","svelte-wejjat"),h(s,"id","comic-date"),h(v,"id","comic-from-now"),h(e,"class","comic-container svelte-wejjat")},m(f,m){E(f,e,m),p(e,t),p(t,n),p(e,y),p(e,c),p(e,w),p(e,s),p(s,o),p(e,d),p(e,v),p(v,C)},p(f,m){m&1&&r!==(r=f[0].title+"")&&P(n,r),m&1&&!T(c.src,u=f[0].img)&&h(c,"src",u),m&1&&l!==(l=f[0].alt)&&h(c,"alt",l),m&1&&i!==(i=B(`${f[0].year}-${f[0].month}-${f[0].day}`)+"")&&P(o,i),m&1&&D!==(D=f[3](`${f[0].year}-${f[0].month}-${f[0].day}`)+"")&&P(C,D)},d(f){f&&_(e)}}}function x(a){let e,t,r,n,y;function c(o,d){return o[2]?X:W}let u=c(a),l=u(a);function w(o,d){if(o[2]&&o[0])return Z;if(o[1])return Y}let s=w(a),i=s&&s(a);return{c(){e=g("div"),t=g("button"),l.c(),r=S(),i&&i.c(),this.h()},l(o){e=$(o,"DIV",{class:!0});var d=k(e);t=$(d,"BUTTON",{id:!0,class:!0});var v=k(t);l.l(v),v.forEach(_),r=I(d),i&&i.l(d),d.forEach(_),this.h()},h(){h(t,"id","comicButton"),h(t,"class","svelte-wejjat"),h(e,"class","wrapper svelte-wejjat")},m(o,d){E(o,e,d),p(e,t),l.m(t,null),p(e,r),i&&i.m(e,null),n||(y=z(t,"click",a[4]),n=!0)},p(o,[d]){u!==(u=c(o))&&(l.d(1),l=u(o),l&&(l.c(),l.m(t,null))),s===(s=w(o))&&i?i.p(o,d):(i&&i.d(1),i=s&&s(o),i&&(i.c(),i.m(e,null)))},i:q,o:q,d(o){o&&_(e),l.d(),i&&i.d(),n=!1,y()}}}async function ee(a){const e=new URLSearchParams({email:a}),t=await fetch(`https://fwd.innopolis.university/api/hw2?${e}`);if(!t.ok)throw new Error("Failed to fetch comic ID");return t.text()}async function te(a){const e=new URLSearchParams({id:a}),t=await fetch(`https://fwd.innopolis.university/api/comic?${e}`);if(!t.ok)throw new Error("Failed to fetch comic");return t.json()}function B(a){return new Date(a).toLocaleDateString()}function re(a,e,t){U.extend(Q);let r=null,n=null;async function y(){const w="i.kuzmenkov@innopolis.university";try{const s=await ee(w);t(0,r=await te(s)),t(2,u=!0)}catch(s){t(1,n=s.message),console.error("Error fetching and displaying comic:",s)}}function c(w){const s=new Date(w);return U(s).fromNow()}let u=!1;function l(){u?t(2,u=!1):y()}return[r,n,u,c,l]}class ae extends R{constructor(e){super(),V(this,e,re,x,F,{})}}function ie(a){let e,t;return e=new ae({}),{c(){A(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,n){M(e,r,n),t=!0},p:q,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}class ce extends R{constructor(e){super(),V(this,e,null,ie,F,{})}}export{ce as component};
